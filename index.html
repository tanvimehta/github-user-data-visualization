<html>
<head>
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="http://d3js.org/topojson.v1.min.js"></script>
</head>

<body>
<h1> Project 1 - Programming Language Popularity </h1>
<p> C distribution
	<div id ="mapC"></div>
	<script>
        var mapwidth = 960, mapheight = 700;
        var projection = d3.geo.equirectangular();
        var path = d3.geo.path().projection(projection);
        var svgMapC = d3.select("#mapC").append("svg")
                      .attr("width", mapwidth).attr("height", mapheight);
        var gMapC = svgMapC.append("g");
        var worldObjectC;
        d3.json("world-50m.json", function(error, world){
        	worldObjectC = world;
        	if(error){console.log(error);}

        	var countries = topojson.feature(world, world.objects.countries).features;
        	countries.forEach(function(country){
        		gMapC.append("path").attr("d", path(country))
        		 .style("fill", "#ccc")
        		 .style("stroke", "#888");
        	});

             d3.csv("C_latlong.csv", function(error, csvdata){
            if(error){
                console.log(error);
            }
            
            for(var i = 0; i < csvdata.length; i++){
                var lon = csvdata[i].longitude;
                var lat = csvdata[i].latitude;
                if(lat == "" || lon == ""){
                    continue;
                }
                var lon_number = parseFloat(lon);
                var lat_number = parseFloat(lat);
                var coordiantes = projection([lon_number, lat_number]);
                gMapC.append("circle").attr("cx", coordiantes[0])
                    .attr("cy", coordiantes[1])
                    .attr("r", 10)
                    .style("fill", "#023F82")
                    .style("opacity", 0.5);
            }
        });
    });

       
	</script>
</p>

<p> Java distribution
    <div id ="mapJava"></div>
    <script>
        var mapwidth = 960, mapheight = 700;
        var projection = d3.geo.equirectangular();
        var path = d3.geo.path().projection(projection);
        var svgMapJava = d3.select("#mapJava").append("svg")
                      .attr("width", mapwidth).attr("height", mapheight);
        var gMapJava = svgMapJava.append("g");
        var worldObjectJava;
        d3.json("world-50m.json", function(error, world){
            worldObjectJava = world;
            if(error){console.log(error);}

            var countries = topojson.feature(world, world.objects.countries).features;
            countries.forEach(function(country){
                gMapJava.append("path").attr("d", path(country))
                 .style("fill", "#ccc")
                 .style("stroke", "#888");
            });

            d3.csv("JavaLatLong_unsorted.csv", function(error, csvdata){
            if(error){
                console.log(error);
            }
            
            for(var i = 0; i < 300; i++){
                var lon = csvdata[i].longitude;
                var lat = csvdata[i].latitude;
                if(lat == "" || lon == ""){
                    continue;
                }
                var lon_number = parseFloat(lon);
                var lat_number = parseFloat(lat);
                var coordiantes1 = projection([lon_number, lat_number]);
                gMapJava.append("circle").attr("cx", coordiantes1[0])
                    .attr("cy", coordiantes1[1])
                    .attr("r", 10)
                    .style("fill", "#023F82")
                    .style("opacity", 0.7);
            }
        });
    });

       
    </script>
</p> JavaScript distribution
    <div id ="mapJS"></div>
    <script>
        var mapwidth = 960, mapheight = 700;
        var projection = d3.geo.equirectangular();
        var path = d3.geo.path().projection(projection);
        var svgMapJS = d3.select("#mapJS").append("svg")
                      .attr("width", mapwidth).attr("height", mapheight);
        var gMapJS = svgMapJS.append("g");
        var worldObjectJS;
        d3.json("world-50m.json", function(error, world){
            worldObjectJS = world;
            if(error){console.log(error);}

            var countries = topojson.feature(world, world.objects.countries).features;
            countries.forEach(function(country){
                gMapJS.append("path").attr("d", path(country))
                 .style("fill", "#ccc")
                 .style("stroke", "#888");
            });
            d3.csv("JSlatlong.csv", function(error, csvdata){
                if(error){
                    console.log(error);
                }

                var occur = new Array();
                
                for(var i = 0; i < csvdata.length; i++){
                    var occur_number = parseInt(csvdata[i].occurences);
                    occur.push(occur_number);
                }
                var max_occur = d3.max(occur);
                var min_occur = d3.min(occur);
                var radius_scale = d3.scale.linear()
                    .domain([min_occur, max_occur])
                    .range([0, 20]);
                
                for(var i = 0; i < csvdata.length; i++){
                    var lon = csvdata[i].longitude;
                    var lat = csvdata[i].latitude;
                    var occ = csvdata[i].occurences;
                    if(lat == "" || lon == "" || occ == ""){
                        continue;
                    }
                    var lon_number = parseFloat(lon);
                    var lat_number = parseFloat(lat);
                    var occur_number = parseInt(occ);
                    var radius = radius_scale(occur_number) + 7;
                    var coordiantes2 = projection([lon_number, lat_number]);
                    gMapJS.append("circle").attr("cx", coordiantes2[0])
                        .attr("cy", coordiantes2[1])
                        .attr("r", radius)
                        .style("fill", "#023F82")
                        .style("opacity", 0.7);
            }
        });
    });

        
    </script>
<p>

</p>
</body>
</html>